{% extends "base_admin.html" %}

{% block content %}
<h2>üìä B√°o c√°o t·ªïng h·ª£p</h2>
<div class="container">
    <h1>Th·ªëng k√™ qu·∫£n tr·ªã</h1>

    <h2>Doanh thu</h2>
    <ul>
        <li>H√¥m nay: {{ revenue_today }} VND</li>
        <li>Th√°ng n√†y: {{ revenue_month }} VND</li>
        <li>NƒÉm nay: {{ revenue_year }} VND</li>
    </ul>

    <canvas id="revenueChart"></canvas>

    <h2>S·ªë ƒë∆°n h√†ng</h2>
    <ul>
        <li>H√¥m nay: {{ orders_today }}</li>
        <li>Th√°ng n√†y: {{ orders_month }}</li>
        <li>NƒÉm nay: {{ orders_year }}</li>
    </ul>

    <canvas id="ordersChart"></canvas>

    <h2>Top 5 s·∫£n ph·∫©m b√°n ch·∫°y</h2>
    <ul>
        {% for item in top_products %}
        <li>{{ item.product__name }}: {{ item.total_sold }} c√°i</li>
        {% endfor %}
    </ul>

    <canvas id="productChart"></canvas>

    <h2>Ng∆∞·ªùi d√πng m·ªõi trong th√°ng: {{ new_users }}</h2>
</div>

<script>
    const revenueChart = new Chart(document.getElementById('revenueChart'), {
        type: 'bar',
        data: {
            labels: ['H√¥m nay', 'Th√°ng n√†y', 'NƒÉm nay'],
            datasets: [{
                label: 'Doanh thu (VND)',
                data: [{{ revenue_today }}, {{ revenue_month }}, {{ revenue_year }}],
    backgroundColor: '#4caf50'
            }]
        }
    });

    const ordersChart = new Chart(document.getElementById('ordersChart'), {
        type: 'bar',
        data: {
            labels: ['H√¥m nay', 'Th√°ng n√†y', 'NƒÉm nay'],
            datasets: [{
                label: 'S·ªë ƒë∆°n h√†ng',
                data: [{{ orders_today }}, {{ orders_month }}, {{ orders_year }}],
    backgroundColor: '#2196f3'
            }]
        }
    });

    const productChart = new Chart(document.getElementById('productChart'), {
        type: 'bar',
        data: {
            labels: [{% for item in top_products %}'{{ item.product__name }}'{% if not forloop.last %}, {% endif %}{% endfor %}],
    datasets: [{
        label: 'S·ªë l∆∞·ª£ng b√°n',
        data: [{% for item in top_products %}{{ item.total_sold }}{% if not forloop.last %}, {% endif %} {% endfor %}],
    backgroundColor: '#ff9800'
            }]
        }
    });
</script>
{% endblock %}