{% extends "base_admin.html" %}
{% load humanize %}
{% block content %}
<div class="container py-4">
  <h3 class="text-primary mb-4">Chi tiáº¿t Ä‘Æ¡n hÃ ng {{ order.id }}</h3>

  <div class="card shadow-sm rounded-3">
    <div class="card-body">
      <h5 class="card-title">ThÃ´ng tin Ä‘Æ¡n hÃ ng</h5>
      <div class="row">
        <div class="col-md-6">
          <p><strong>KhÃ¡ch hÃ ng:</strong> {{ order.user.username }}</p>
          <p><strong>NgÃ y táº¡o:</strong> {{ order.create_date|date:"d \T\hÃ¡\n\g m, Y" }}</p>
          <p><strong>Tá»•ng tiá»n:</strong> {{ order.total_amount|intcomma }} VND</p>
        </div>
        <div class="col-md-6">
          <p><strong>Sá»‘ Ä‘iá»‡n thoáº¡i:</strong> {{ order.phone }}</p>
          <p><strong>Äá»‹a chá»‰:</strong> {{ order.address }}</p>
          <p><strong>Tráº¡ng thÃ¡i:</strong>
            {% if order.status == 0 %}ğŸ•’ Äang chá» xÃ¡c nháº­n
            {% elif order.status == 1 %}âœ… ÄÃ£ xÃ¡c nháº­n
            {% elif order.status == 2 %}ğŸšš Äang giao hÃ ng
            {% elif order.status == 3 %}ğŸ“¦ Giao hÃ ng thÃ nh cÃ´ng
            {% else %}â“ KhÃ´ng xÃ¡c Ä‘á»‹nh
            {% endif %}
          </p>
        </div>
      </div>

      <h5 class="mt-4">Sáº£n pháº©m trong Ä‘Æ¡n hÃ ng</h5>
      <div style="max-height: 300px; overflow-y: auto; border: 1px solid #dee2e6; border-radius: 5px;">
        <table class="table table-bordered table-hover mb-0">
          <thead class="table-light">
            <tr>
              <th>STT</th>
              <th>TÃªn sáº£n pháº©m</th>
              <th>Sá»‘ lÆ°á»£ng</th>
              <th>GiÃ¡</th>
              <th>Tá»•ng</th>
            </tr>
          </thead>
          <tbody>
            {% for detail in order.orderdetail_set.all %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ detail.product.name }}</td>
              <td>{{ detail.quantity }}</td>
              <td>{{ detail.product.price|intcomma }} VND</td>
              <td>{{ detail.amount|intcomma }} VND</td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="5">KhÃ´ng cÃ³ sáº£n pháº©m nÃ o trong Ä‘Æ¡n hÃ ng.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="mt-4">
        <a href="{% url 'custom_admin:order_list' %}" class="btn btn-secondary">â†© Quay láº¡i</a>
        <a href="{% url 'custom_admin:order_export' order.id %}" class="btn btn-success ms-2">ğŸ“„ Xuáº¥t hÃ³a Ä‘Æ¡n (PDF)</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}